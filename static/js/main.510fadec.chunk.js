(this["webpackJsonpow-team-balancer"]=this["webpackJsonpow-team-balancer"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(37)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),i=n.n(c),l=(n(20),n(21),n(22),n(2)),o=n.n(l),u=n(4),s=(n(24),n(5)),m=n.n(s),d=(n(25),function(e){var t=e.children,n=e.direction,a=void 0===n?"row":n,c=e.indent,i=e.width,l=e.height,o=e.justifyContent,u=e.className,s=e.wrap,d=m()("ui-flex","ui-flex--direction_row",u,{"ui-flex--indent_small":"small"===c,"ui-flex--indent_medium":"medium"===c,"ui-flex--indent_large":"large"===c,"ui-flex--wrap_wrap":"wrap"===s});return r.a.createElement("div",{className:d,style:{width:i,height:l,flexDirection:a,justifyContent:o}},t)}),f=function(e){return r.a.createElement(d,{width:e.width},r.a.createElement("input",Object.assign({type:"text",className:"ui-text-input box"},e)))},h=(n(26),function(e){var t=e.kind,n=e.width;return r.a.createElement("img",{src:"img/".concat(t,".png"),width:n,alt:t})}),p=function(e){return Math.floor(Math.random()*Math.floor(e))},b=function(e){return Math.round(e.reduce((function(e,t){return e+t.points}),0)/e.length)},v={padding:0},g=function(e){return e<1500?"bronze":e>=4e3?"gm":["silver","gold","platinum","diamond","master"][Math.floor(e/500)-3]},E=r.a.memo((function(e){var t=e.players,n=e.height,c=e.width,i=e.hasPointsColumn,l=e.isRevesed,o=e.isSmall,u=m()("ui-table",{"ui-table--kind_small":o,"ui-table--kind_large":!o,"ui-table--display_reversed":l}),s=Object(a.useMemo)((function(){return{height:n,width:c,overflowY:"auto"}}),[n,c]),d=Object(a.useMemo)((function(){var e=b(t),n=[r.a.createElement("th",{key:"hcol1"}),r.a.createElement(a.Fragment,{key:"hcol2"},r.a.createElement("th",{style:{width:"8em"}},o?e:"battletag"),i&&r.a.createElement("th",null,"Points")),r.a.createElement("th",{key:"hcol3",style:v},o&&r.a.createElement(h,{kind:g(e),width:30}))];return l?n.reverse():n}),[i,l,o,t]),f=Object(a.useCallback)((function(e){var t=[r.a.createElement("td",{key:"bcol1",style:v},r.a.createElement(h,{kind:e.role,width:20})),r.a.createElement(a.Fragment,{key:"bcol2"},r.a.createElement("td",null,e.battletag),i&&r.a.createElement("td",null,e.points)),r.a.createElement("td",{key:"bcol3",style:o?v:{padding:"3px 5px 0 5px"}},r.a.createElement(h,{kind:g(e.points),width:30}))];return l?t.reverse():t}),[i,l,o]);return r.a.createElement("div",{className:u,style:s},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,d)),r.a.createElement("tbody",{className:"table-body"},t.map((function(e){return r.a.createElement("tr",{key:e.id},f(e))})))))})),y=(n(27),function(e){var t=e.tabs,n=e.activeTab,c=e.onClick,i=Object(a.useCallback)((function(e){c(e.currentTarget.value)}),[c]),l=Object(a.useCallback)((function(e){return m()({"ui-tabs-btn":!0,"ui-tabs-btn_active":n===e})}),[n]);return r.a.createElement(d,{className:"ui-tabs"},t.map((function(e){var t=e.title,n=e.value;return r.a.createElement("button",{key:n,className:l(n),onClick:i,value:n},t)})))}),w=n(3),k=n.n(w);n(28),n(32);k.a.initializeApp({apiKey:"AIzaSyAZqUUv1gkGq0ZaxZlpT4dB634pZqnhMgg",authDomain:"ow-balancer-api.firebaseapp.com",projectId:"ow-balancer-api"});var x=new k.a.auth.GoogleAuthProvider,j=k.a.firestore().collection("users"),O=k.a.firestore().collection("players"),C=k.a.firestore().collection("access");function M(){var e,t=k.a.auth(),n=Object(a.useState)(null===(e=t.currentUser)||void 0===e?void 0:e.uid),r=Object(u.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){t.onAuthStateChanged((function(e){i(null===e||void 0===e?void 0:e.uid)}))}),[t]),{isLoggedIn:!!c,userID:c}}var N=[{title:"Player database",value:"db"},{title:"Match pool",value:"match"}],I=function(e){var t,n=e.playersList,c=Object(a.useState)(n),i=Object(u.a)(c,2),l=i[0],s=i[1],m=Object(a.useState)(""),h=Object(u.a)(m,2),p=h[0],b=h[1],v=Object(a.useState)("db"),g=Object(u.a)(v,2),w=g[0],k=g[1],x=function(){var e=M(),t=e.isLoggedIn,n=e.userID,r=Object(a.useState)(),c=Object(u.a)(r,2),i=c[0],l=c[1];return Object(a.useEffect)((function(){!function(){var e,a;o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=3;break}return l(void 0),r.abrupt("return");case 3:return r.prev=3,r.next=6,o.a.awrap(C.doc(n).get());case 6:e=r.sent,(a=e.data())&&l(a),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(3),console.error(r.t0);case 14:case"end":return r.stop()}}),null,null,[[3,11]])}()}),[t,n]),i}();Object(a.useEffect)((function(){l.length||function(){var e,t;o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.a.awrap(O.get());case 3:e=n.sent,t=[],e.forEach((function(e){return t.push(e.data())})),s(t),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.error(n.t0);case 12:case"end":return n.stop()}}),null,null,[[0,9]])}()}),[l]);var j=function(e){b(e.target.value.trim())},I=Object(a.useCallback)((function(e){k(e)}),[]);return r.a.createElement(d,{direction:"column"},r.a.createElement(y,{tabs:N,activeTab:w,onClick:I}),(null===x||void 0===x?void 0:null===(t=x.players)||void 0===t?void 0:t.write)&&r.a.createElement("form",null,r.a.createElement(d,{justifyContent:"space-between"},r.a.createElement(f,{width:100,onChange:j,placeholder:""}),r.a.createElement(f,{width:100,onChange:j,placeholder:""}),r.a.createElement(f,{width:100,onChange:j,placeholder:""})),r.a.createElement("button",{type:"submit",onClick:function(e){var t;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.prev=1,n.next=4,o.a.awrap(O.add({battletag:p,created:new Date}));case 4:t=n.sent,console.log("Document written with ID: ",t.id),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.error("Error adding document: ",n.t0);case 11:case"end":return n.stop()}}),null,null,[[1,8]])}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),r.a.createElement(E,{players:l,width:430,height:"75vh",hasPointsColumn:!0}))},S=(n(34),function(e){var t=e.number,n=e.match;return r.a.createElement(d,{className:"match-card",direction:"column"},r.a.createElement("span",{className:"match-card--header"},"MATCH #",t),r.a.createElement(d,null,r.a.createElement(E,{players:n[0],isSmall:!0}),r.a.createElement(E,{players:n[1],isSmall:!0,isRevesed:!0})))}),A=n(7),_=n(6),D=n.n(_),P=function(e){var t=function(e){var t=D.a.groupBy(e,"role"),n=t.offense,a=t.tank,r=t.support;return n&&a&&r?Array.from({length:Math.min(n.length,a.length,r.length)/2}).map((function(e,t){var c=2*t,i=2*t+1;return[n[c],n[i],a[c],a[i],r[c],r[i]]})):[]}(function(e){return D.a.sortBy(e,"points")}(e));return Array.from({length:t.length/2}).map((function(e,n){return[t[2*n],t[2*n+1]]}))},L=function(e){return P(e).map((function(e,t){var n=b([].concat(Object(A.a)(e[0]),Object(A.a)(e[1]))),a=e.map((function(e){return D.a.groupBy(e,"role")})),r=Object(u.a)(a,2),c=r[0],i=r[1],l=D.a.mapValues(c,(function(e,t){return[].concat(Object(A.a)(e),Object(A.a)(i[t]))})),o=[[],[]];return D.a.forEach(l,(function(e){e.forEach((function(t,a){var r=function(e,t){var n=e.map((function(e){return{player:e,difference:Math.abs(t-e.points)}})),a=Math.min.apply(Math,Object(A.a)(D.a.map(n,"difference")));return n.find((function(e){return e.difference===a})).player}(e,n);o[a%2].push(r),e=e.filter((function(e){return e!==r}))}))})),o}))},B=(n(36),function(e){var t=e.children,n=e.isPrimary,a=e.onClick;return r.a.createElement("button",{className:m()({"ui-button":!0,"ui-button_primary":n}),onClick:a},t)}),T=function(){var e=M().isLoggedIn;return r.a.createElement(B,{isPrimary:!e,onClick:function(){var t,n,a;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e){r.next=4;break}k.a.auth().signOut(),r.next=18;break;case 4:return r.prev=4,r.next=7,o.a.awrap(k.a.auth().signInWithPopup(x));case 7:if(n=r.sent,!((a=n.user)&&(null===(t=n.additionalUserInfo)||void 0===t?void 0:t.isNewUser))){r.next=12;break}return r.next=12,o.a.awrap(j.add({id:a.uid,name:null===a||void 0===a?void 0:a.displayName,email:null===a||void 0===a?void 0:a.email}));case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(4),console.error(r.t0);case 17:case 18:case"end":return r.stop()}}),null,null,[[4,14]])}},e?"Logout":"Login")},U=function(){var e=Array.from({length:500}).map((function(e,t){return{id:t.toString(),role:["offense","tank","support"][p(3)],points:p(5e3),battletag:"Tester#".concat(p(9999))}})),t=L(e);return r.a.createElement(d,{className:"App",direction:"column"},r.a.createElement(d,{justifyContent:"flex-end",indent:"large"},r.a.createElement(T,null)),r.a.createElement(d,{indent:"large"},r.a.createElement(I,{playersList:e}),r.a.createElement(d,{className:"match-table",height:"85vh",wrap:"wrap"},t.map((function(e,t){return r.a.createElement(S,{key:t,match:e,number:t+1})})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[15,1,2]]]);
//# sourceMappingURL=main.510fadec.chunk.js.map