{"version":3,"sources":["components/ui/Flex.tsx","components/ui/OwIcon.tsx","helpers.ts","components/ui/Table.tsx","components/PlayersTable.tsx","components/MatchCard.tsx","algorithm/balancer.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["Flex","children","direction","indent","width","height","justifyContent","className","wrap","classes","cn","style","flexDirection","OwIcon","kind","src","alt","getRandomInt","max","Math","floor","random","getPlayersAverageScore","players","round","reduce","memo","player","points","length","zeroPadding","padding","getLeagueIconKind","React","hasPointsColumn","isRevesed","isSmall","useMemo","overflowY","headerColumns","cols","reverse","getBodyColumns","useCallback","battletag","map","firebase","initializeApp","apiKey","authDomain","projectId","dbPlayers","firestore","collection","PlayersTable","playersList","useState","setPlayers","useEffect","a","async","get","querySnapshot","queryPlayers","forEach","doc","push","data","MatchCard","number","match","getMatchList","teams","_","groupBy","offense","tank","support","Array","from","min","index","firstInPair","lastInPair","makeTeams","sortBy","getSortedPlayers","getBalancedMatches","matchID","averageScore","team","groupedA","groupedB","unitedGroups","mapValues","group","role","balancedMatch","playerClosestToAverage","score","playersDifference","difference","abs","minDifference","find","wrapedPlayer","getPlayerClosestToScore","filter","App","randomPlayers","id","toString","matches","Boolean","window","location","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.a171ab72.chunk.js","sourcesContent":["import React from 'react';\nimport cn from 'classnames';\nimport '../../styles/Flex.css';\n\nexport interface FlexProps {\n\tdirection?: 'row' | 'column' | 'row-reverse';\n\tindent?: 'small' | 'medium' | 'large';\n\tjustifyContent?: 'flex-end' | 'center' | 'space-between' | 'space-around';\n\twrap?: 'wrap';\n\tchildren?: React.ReactNode;\n\twidth?: string | number;\n\theight?: string | number;\n\tclassName?: string;\n}\n\nconst Flex = ({children, direction='row', indent, width, height, justifyContent, className, wrap}: FlexProps) => {\n\tconst classes = cn(\n\t\t'ui-flex',\n\t\t'ui-flex--direction_row',\n\t\tclassName,\n\t\t{\n\t\t\t'ui-flex--indent_small': indent === 'small',\n\t\t\t'ui-flex--indent_medium': indent === 'medium',\n\t\t\t'ui-flex--indent_large': indent === 'large',\n\t\t\t'ui-flex--wrap_wrap': wrap === 'wrap',\n\t\t}\n\t);\n\t\n\treturn (\n\t\t<div\n\t\t\tclassName={classes}\n\t\t\tstyle={{width, height, flexDirection: direction, justifyContent}}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nexport default Flex;","import React from 'react';\nimport { League } from 'types';\n\ninterface Props {\n\tkind: League;\n\twidth: number;\n}\n\nconst OwIcon = ({kind, width}: Props) => (\n\t<img src={`img/${kind}.png`} width={width} alt={kind} />\n);\n\nexport default OwIcon;","import { Player } from \"types\";\n\nexport const getRandomInt = (max: number) => {\n  return Math.floor(Math.random() * Math.floor(max));\n}\n\nexport const getPlayersAverageScore = (players: Player[]) => Math.round(\n  players.reduce((memo, player) => memo + player.points, 0) / players.length\n);","import React, { useMemo, useCallback } from 'react';\nimport '../../styles/Table.css';\nimport OwIcon from './OwIcon';\nimport cn from 'classnames';\nimport { Player, League } from 'types';\nimport { getPlayersAverageScore } from 'helpers';\n\ninterface Props {\n\tplayers: Player[];\n\tisSmall?: boolean;\n\theight?: number | string;\n\twidth?: number | string;\n\thasPointsColumn?: boolean;\n\tisRevesed?: boolean;\n}\n\nconst zeroPadding = {padding: 0};\nconst getLeagueIconKind = (points: number): League => {\n\tif (points < 1500) {\n\t\treturn 'bronze';\n\t} else if (points >= 4000) {\n\t\treturn 'gm';\n\t}\n\n\treturn (['silver', 'gold', 'platinum', 'diamond', 'master'] as League[])[Math.floor(points / 500) - 3];\n}\n\nconst Table = ({players, height, width, hasPointsColumn, isRevesed, isSmall}: Props) => {\n\tconst className = cn(\n\t\t'ui-table',\n\t\t{\n\t\t\t'ui-table--kind_small': isSmall,\n\t\t\t'ui-table--kind_large': !isSmall,\n\t\t\t'ui-table--display_reversed': isRevesed,\n\t\t}\n\t);\n\n\tconst style = useMemo(() => ({height, width, overflowY: 'auto' as 'auto'}), [height, width]);\n\n\tconst headerColumns = useMemo(() => {\n\t\tconst points = getPlayersAverageScore(players);\n\t\tconst cols = [\n\t\t\t<th></th>,\n\t\t\t<>\n\t\t\t\t<th style={{width: '8em'}}>\n\t\t\t\t\t{isSmall\n\t\t\t\t\t\t? points\n\t\t\t\t\t\t: 'battletag'\n\t\t\t\t\t}\n\t\t\t\t</th>\n\t\t\t\t{hasPointsColumn && <th>Points</th>}\n\t\t\t</>,\n\t\t\t<th style={zeroPadding}>{isSmall && <OwIcon kind={getLeagueIconKind(points)} width={30} />}</th>\n\t\t];\n\n\t\treturn isRevesed ? cols.reverse() : cols;\n\t}, [hasPointsColumn, isRevesed, isSmall, players]);\n\n\tconst getBodyColumns = useCallback((player: Player) => {\n\t\tconst cols = [\n\t\t\t<td style={zeroPadding}><OwIcon kind=\"offense\" width={20} /></td>,\n\t\t\t<>\n\t\t\t\t<td>{player.battletag}</td>\n\t\t\t\t{hasPointsColumn && <td>{player.points}</td>}\n\t\t\t</>,\n\t\t\t<td style={isSmall ? zeroPadding : {padding: '3px 5px 0 5px'}}><OwIcon kind={getLeagueIconKind(player.points)} width={30} /></td>\n\t\t];\n\n\t\treturn isRevesed ? cols.reverse() : cols;\n\t}, [hasPointsColumn, isRevesed, isSmall]);\n\n\treturn (\n\t\t<div className={className} style={style}>\n\t\t\t<table>\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>{headerColumns}</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody className=\"table-body\">\n\t\t\t\t\t{players.map(player => (\n\t\t\t\t\t\t<tr>{getBodyColumns(player)}</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t);\n};\n\nexport default React.memo(Table);","import React, { useEffect, useState } from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport TextInput from './ui/TextInput';\nimport Flex from './ui/Flex';\nimport Table from './ui/Table';\nimport {Player} from '../types';\n\nfirebase.initializeApp({\n\tapiKey: 'AIzaSyAZqUUv1gkGq0ZaxZlpT4dB634pZqnhMgg',\n\tauthDomain: 'ow-balancer-api.firebaseapp.com',\n\tprojectId: 'ow-balancer-api'\n});\n\nconst dbPlayers = firebase.firestore().collection(\"players\");\n\nconst PlayersTable = ({playersList}: {playersList: Player[]}) => {\n\tconst [players, setPlayers] = useState<Player[]>(playersList);\n  const [inputData, setInputData] = useState('');\n\n  useEffect(() => {\n    if (players.length) return;\n\n    (async () => {\n      try {\n        const querySnapshot = await dbPlayers.get();\n        const queryPlayers: Player[] = [];\n\n        querySnapshot.forEach(doc => queryPlayers.push(doc.data() as Player));\n        setPlayers(queryPlayers);\n      } catch(error) {}\n    })();\n  }, [players]);\n\n  const handleSubmit = async (event: React.SyntheticEvent) => {\n    event.preventDefault();\n\n    try {\n      const docRef = await dbPlayers.add({\n        battletag: inputData,\n        created: new Date(),\n      });\n      console.log(\"Document written with ID: \", docRef.id);\n    } catch (error) {\n      console.error(\"Error adding document: \", error);\n    }\n  }\n\n  const handleInput = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setInputData(event.target.value.trim());\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t{false &&\n        <form>\n          <Flex justifyContent=\"space-between\">\n            <TextInput width={100} onChange={handleInput} placeholder=\"\" />\n            <TextInput width={100} onChange={handleInput} placeholder=\"\" />\n            <TextInput width={100} onChange={handleInput} placeholder=\"\" />\n          </Flex>\n          <button type=\"submit\" onClick={handleSubmit}>Добавить</button>\n        </form>\n      }\n\t\t\t<Table players={players} width={430} height=\"75vh\" hasPointsColumn />\n\t\t</div>\n\t);\n};\n\nexport default PlayersTable;","import React from 'react';\nimport Table from './ui/Table';\nimport Flex from './ui/Flex';\nimport '../styles/match-card.css';\nimport { Match } from 'types';\n\ninterface Props {\n\tnumber: number;\n\tmatch: Match;\n}\n\nconst MatchCard = ({number, match}: Props) => (\n\t<Flex className=\"match-card\" direction=\"column\">\n\t\t<span className=\"match-card--header\">MATCH #{number}</span>\n\t\t<Flex>\n\t\t\t<Table players={match[0]} isSmall />\n\t\t\t<Table players={match[1]} isSmall isRevesed />\n\t\t</Flex>\n\t</Flex>\n);\n\nexport default MatchCard;","import _ from 'lodash';\nimport { Player, Match } from 'types';\nimport { getPlayersAverageScore } from 'helpers';\n\nexport const makeTeams = (players: Player[]) => {\n\tconst {offense, tank, support} = _.groupBy(players, 'role');\n\n\tif (!offense || !tank || !support) return [];\n\n\treturn Array\n\t\t.from({length: Math.min(offense.length, tank.length, support.length) / 2})\n\t\t.map((_, index) => {\n\t\t\tconst firstInPair = index * 2;\n\t\t\tconst lastInPair = index * 2 + 1;\n\n\t\t\treturn [\n\t\t\t\toffense[firstInPair],\n\t\t\t\toffense[lastInPair],\n\t\t\t\ttank[firstInPair],\n\t\t\t\ttank[lastInPair],\n\t\t\t\tsupport[firstInPair],\n\t\t\t\tsupport[lastInPair],\n\t\t\t];\n\t});\n}\n\nconst getSortedPlayers = (players: Player[]) => _.sortBy(players, 'points');\n\nexport const getMatchList = (players: Player[]) => {\n\tconst teams = makeTeams(getSortedPlayers(players));\n\n\treturn Array\n\t\t.from({length: teams.length / 2})\n\t\t.map((_, index) => [teams[index * 2], teams[index * 2 + 1]]);\n};\n\nconst getPlayerClosestToScore = (players: Player[], score: number) => {\n\tconst playersDifference = players.map(player => ({player, difference: Math.abs(score - player.points)}));\n\tconst minDifference = Math.min(..._.map(playersDifference, 'difference'));\n\t\n\treturn playersDifference.find(wrapedPlayer => wrapedPlayer.difference === minDifference)!.player;\n};\n\nexport const getBalancedMatches = (players: Player[]) => {\n\tconst matches = getMatchList(players);\n\n\tconst balancedMatches = matches.map((match, matchID) => {\n\t\tconst averageScore = getPlayersAverageScore([...match[0], ...match[1]]);\n\t\tconst [groupedA, groupedB] = match.map(team => _.groupBy(team, 'role'));\n\t\tconst unitedGroups = _.mapValues(groupedA, (group, role) => [...group, ...groupedB[role]]);\n\n\t\tconst balancedMatch: Match = [[], []];\n\n\t\t_.forEach(unitedGroups, group => {\n\t\t\tgroup.forEach((player, index) => {\n\t\t\t\tconst playerClosestToAverage = getPlayerClosestToScore(group, averageScore);\n\n\t\t\t\tbalancedMatch[index % 2].push(playerClosestToAverage);\n\t\t\t\tgroup = group.filter(player => player !== playerClosestToAverage);\n\t\t\t});\n\t\t});\n\n\t\treturn balancedMatch;\n\t});\n\n\treturn balancedMatches;\n}","import React from 'react';\n// import logo from './logo.svg';\nimport './styles/App.css';\nimport './styles/ui-helpers.css';\nimport PlayersTable from './components/PlayersTable';\nimport Flex from 'components/ui/Flex';\nimport MatchCard from 'components/MatchCard';\nimport { getBalancedMatches } from 'algorithm/balancer';\nimport { getRandomInt } from 'helpers';\nimport { Player } from 'types';\n\nconst App = () => {\n  const randomPlayers = Array\n\t.from({length: 500})\n\t.map((_, index) => ({\n    id: index.toString(),\n\t\trole: ['offense', 'tank', 'support'][getRandomInt(3)] as Player[\"role\"],\n    points: getRandomInt(5000),\n    battletag: `Tester#${getRandomInt(9999)}`\n\t}));\n  const matches = getBalancedMatches(randomPlayers);\n\n  return (\n    <Flex className=\"App\">\n      <PlayersTable playersList={randomPlayers} />\n      <Flex className=\"abc\" height=\"75vh\" wrap=\"wrap\">\n        {matches.map((match, index) => <MatchCard match={match} number={index + 1} />)}\n      </Flex>\n    </Flex>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}